window.ChatWidget={init:function(n,e="default"){const t={default:"#3D88ED",halloween:"#ff5e00",rose:"#ff005e",violet:"#5e00ff",sky:"#00b3ff",forest:"#139e70",lemon:"#e3df00"},i=document.createElement("div"),o=`\n      <style>\n        :root {\n          --primary-color: ${t[e]};\n        }\n      .ping-container {\n        color: #3c3c3c;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: absolute;\n        top: 1.65rem;\n        right: 1.65rem;\n        \n      }\n\n        .dot {\n        position: relative;\n        width: fit-content;\n        background: var(--primary-color);\n        border-radius: 40px;\n        width: 1rem;\n        height: 1rem;\n      }\n\n      .heartbeat {\n        position: absolute;\n        width: fit-content;\n        background-color: var(--primary-color);\n        border-radius: 40px;\n        width: 1rem;\n        height: 1rem;\n        opacity: 0.75;\n        animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;\n      }\n     \n      @keyframes ping {\n        75%,\n        100% {\n          transform: scale(2);\n          opacity: 0;\n        }\n      }\n      @keyframes grow-to-full-screen {\n        0% { opacity: 0; transform: translateY(50%)}\n        100% { opacity: 1; transform: translateY(0)}\n      }\n      @keyframes rotate-load {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n      @keyframes appear {\n        0% { opacity: 0; transform: translateY(500px) scaleY(0.5); }\n        100% { opacity: 1; transform: translateY(0) scaleY(1); }\n      }\n      @keyframes shrink-chat {\n            0% { height: 500px,transform: translateY(100%) scaleY(0.5); }\n            100% { height: 256px !important; transform: translateY(0) scaleY(1); }\n      }\n      @keyframes scale-to-0 {\n        0% { transform: translateY(0) scaleY(1); opacity: 1; }\n        100% { transform: translateY(100%) scaleY(0); opacity: 0; }\n      }\n      @keyframes scale-to-100 {\n        0% { opacity: 0; transform: translateY(100%) scaleY(0.5); }\n        100% { opacity: 1; transform: translateY(0) scaleY(1); }\n      }\n      #chat-widget {\n        position: fixed; bottom: 10px; right: 20px; display: grid; z-index: 99999999 !important;\n      }\n    \n      #chat-messages {\n        height: auto; padding: 10px; overflow-y: auto;\n      }\n      #floating-icon-btn {\n        box-sizing: border-box; margin-left: auto; margin-top: auto; display: inline-flex;\n        height: 64px; width: 64px; align-items: center; justify-content: center; border-radius: 9999px;\n        cursor: pointer; background-color: white; color: var(--primary-color); border-style: none;\n        box-shadow: 2px 2px 16px 2px rgba(22, 22, 22, 0.1);\n      }\n    \n      #loading-icon {\n        color: #f1f1f1;\n        animation: rotate-load 1s linear infinite;\n      }\n      .h-7 { height: 1.75rem; }\n      .w-7 { width: 1.75rem; }\n      .rounded-lg { border-radius: 20px; }\n      .ring-1 {\n        --tw-ring-color: rgb(17 24 39 / 0.05); --tw-ring-shadow: 0 0 #0000;\n        --tw-ring-offset-color: #fff; --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0\n        var(--tw-ring-offset-width) var(--tw-ring-offset-color);\n        box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow),\n        var(--tw-shadow, 0 0 #0000);\n      }\n      #widget-chat-frame {\n        display: none; width: 400px; height: 500px; transform-origin: 95% 100%;\n      }\n      #widget-chat-frame.active {\n        display: block; animation: scale-to-100 0.5s ease forwards; animation-timing-function: cubic-bezier(0.2, 0, 0.8, 1.3);\n      }      \n      #widget-chat-frame.deactive {\n        display: block; animation: scale-to-0 0.5s ease forwards; animation-timing-function: cubic-bezier(0.2, 0, 0.8, 1.3);\n      }\n      #widget-chat-frame.hidden {\n        display: none;\n      }\n      #widget-chat-frame.active.shrink {\n        height: 256px !important; animation: scale-to-100 0.5s ease forwards; animation-timing-function: cubic-bezier(0.2, 0, 0.8, 1.3);\n    \n      }\n      #widget-chat-frame.deactive.shrink {\n        height: 256px !important;\n      }\n     \n     \n      .iframe_inset {\n        inset: auto 15px 106px auto;\n      }\n      #widget_triangle {\n        display: none;\n      }\n      #widget_triangle.active {\n        display: block; position: absolute; inset: auto 36px 88px auto;\n        animation: appear 0.5s ease forwards; animation-timing-function: cubic-bezier(0.2, 0, 0.8, 1.3);\n        stroke: white; fill: white; z-index: 99999999;\n      }\n      #chat-messages-ping {\n        display: none;\n        }\n      #chat-messages-ping.active {\n        display: flex;\n      }\n        #widget-chat-frame.fullscreen {\n                display: block;\n                position: fixed;\n                top: 0;\n                left: 0;\n                border-radius: 0px;\n                width: 100vw;\n                height: 100vh;\n                z-index: 99999999 !important; background-color: rgba(0, 0, 0, 0.15);\n                transform-origin: 95% 100%;\n                animation: grow-to-full-screen 0.3s ease forwards;\n        }\n        \n      @media (max-width: 768px) {\n\n        @keyframes grow-to-full-screen {\n            0% { height: 70vh; }\n            100% { height: 100vh; }\n        }\n      \n        .iframe_inset {\n          inset: auto 0px 108px 0px;\n        }\n        #widget-chat-frame {\n          transform-origin: 85% 100%; width: 100vw; height: 70vh;\n        }\n      }\n      </style>\n    `,a={icon_close:'\n        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none" stroke="currentColor" stroke-width="2.6667" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8">\n          <line x1="24" x2="8" y1="8" y2="24"></line>\n          <line x1="8" x2="24" y1="8" y2="24"></line>\n        </svg>\n      ',icon_message:'\n        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none" stroke="currentColor" stroke-width="2.6667" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-messages-square w-8 h-8">\n          <path d="M18.667 12a2.667 2.667 0 0 1-2.667 2.667H8l-5.333 5.333V5.333c0-1.467 1.2-2.667 2.667-2.667h10.667a2.667 2.667 0 0 1 2.667 2.667v7Z"></path>\n          <path d="M24 12h2.667a2.667 2.667 0 0 1 2.667 2.667v14.667L24 24h-8a2.667 2.667 0 0 1-2.667-2.667v-1.333"></path>\n        </svg>\n      ',loading:'\n        <svg id="loading-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none" stroke="currentColor" stroke-width="2.6667" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader-circle">\n          <path d="M28 16a12 12 0 1 1-8.292-11.413"/>\n        </svg>\n      '},r=window.location.host;i.id="chat-widget";const s=`${n}?domain=${r}`,d=`${n}/widget-notification`;i.innerHTML=`\n      <iframe id="widget-chat-frame" src="${s}" class="ring-1 rounded-lg iframe_inset" \n        style="box-shadow: 2px 4px 16px 2px #1616161A; border: none; position: fixed; background: white !important; margin: 0px; max-height: 100vh; max-width: 100vw; transform: translateY(0); z-index: 99999999 !important;">\n      </iframe>\n      <svg fill="#000000" id="widget_triangle" height="12" width="12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 490 490" xml:space="preserve" stroke="#ffffff">\n        <g><polygon points="245,456.701 490,33.299 0,33.299 "></polygon></g>\n      </svg>\n      <div id="iframe-trigger-container" style="position: fixed; \n      bottom: 0; right: 0; width: 120px; height: 120px;">\n        <iframe id="floating-button-iframe" src="${d}" style="position: fixed; bottom: 0; right: 0; width: 120px; height: 120px;\n        border-radius: 50%;\n        border: none;"\n        ></iframe>\n        <button id="floating-icon-btn" style="position: absolute; bottom: 28px; right: 28px; width: 64px; height: 64px; opacity: 1; font-size: 32px;">\n          ${a.loading}\n         </button>\n          <div \n          id="chat-messages-ping"\n          class="ping-container">\n            <span class="heartbeat"></span>\n            <span class="dot"></span>\n          </div>\n      </div> \n\n    `,document.head.insertAdjacentHTML("beforeend",o),document.body.appendChild(i);const c=document.getElementById("floating-icon-btn"),l=document.getElementById("widget-chat-frame");c.style.color=t.rose;const g=document.getElementById("widget_triangle");document.getElementById("floating-button-iframe").style.display="none";const m=document.getElementById("iframe-trigger-container");l.classList.add("shrink"),window.addEventListener("message",(n=>{document.getElementById("iframe-trigger-container");const e=document.getElementById("chat-messages-ping"),{type:o,payload:a}=n.data;switch(console.log("event.data -- ",o,n.data),o){case"open-chat-widget":case"close-chat-widget":break;case"ping":e.classList.add("active");break;case"no-ping":e.classList.remove("active");break;case"show-form":case"room-found":console.log("room-found or on-start"),l.classList.remove("shrink");break;case"hide-form":case"room-end":l.classList.add("shrink");break;case"media-show":l.classList.add("fullscreen"),g.style.zIndex=0;break;case"media-close":l.classList.contains("fullscreen")&&(l.classList.remove("fullscreen"),g.style.zIndex=999999999);break;case"update-primary-color":const{themeColor:n}=a;t[n]&&(c.style.color=t[n]);break;case"open-form":{const{urlToForm:n}=a;console.log("open-form",n);const e=document.createElement("iframe");e.id="form-iframe",e.src=n,e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100vw",e.style.height="100vh",e.style.backgroundColor="#dadada22",e.style.border="none",e.style.zIndex="999999999",i.appendChild(e);break}case"close-form":{const n=document.getElementById("form-iframe");n&&(n.style.display="none")}}n.data})),m.addEventListener("click",(()=>{!0!==m.disabled&&(c.innerHTML!==a.icon_close?(c.innerHTML=a.icon_close,l.classList.remove("deactive"),l.classList.add("active"),g.classList.add("active")):(c.innerHTML=a.icon_message,l.classList.remove("active"),l.classList.add("deactive"),g.classList.remove("active")))})),m.disabled=!0,fetch(`${n}/check-host?host=${r}`,{mode:"no-cors",method:"GET",headers:{Accept:"Content-Type"}}).then((n=>{console.log("response",n),setTimeout((()=>{c.innerHTML=a.icon_message,m.disabled=!1,console.log("widgetChatFrame loaded")}),1800)})).catch((n=>{i.remove()})),l.addEventListener("load",(()=>{console.log("widgetChatFrame loaded")}))}};